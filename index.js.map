{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = '51392705-c835407a6ad34302eafe3f79f';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n// функція HTTP запитів \nexport async function getImagesByQuery(query, page = 1, perPage = 15) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: perPage,\n    },\n  });\n  return response.data;\n}\n","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) loader.classList.add('hidden');\n}\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) loader.classList.remove('hidden');\n}\n\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  if (gallery) {\n    gallery.innerHTML = '';\n  }\n}\n\nexport function createGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images.map(image => {\n    return `\n      <li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a>\n       <div class=\"info\">\n           <div class=\"labels\">\n              <span>Likes</span>\n              <span>Views</span>\n              <span>Comments</span>\n              <span>Downloads</span>\n           </div>\n         <div class=\"stats\">\n              <span>${image.likes}</span>\n              <span>${image.views}</span>\n              <span>${image.comments}</span>\n              <span>${image.downloads}</span>\n         </div>\n       </div>\n\n      </li>\n    `;\n  }).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\nexport function showLoadMoreButton() {\n  const btn = document.querySelector('.load-more');\n  if (btn) btn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  const btn = document.querySelector('.load-more');\n  if (btn) btn.classList.add('hidden');\n}\n","// Імпорти\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n//  DOM-елементи\nconst form = document.querySelector('.form');\nconst input = form.elements['search-text'];\nconst loadMoreBtn = document.querySelector('.load-more');\n\n// Стани запиту\nlet currentPage = 1;\nlet currentQuery = '';\n\n// Обробка пошуку\nform.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  const query = input.value.trim();\n\n  if (!query) {\n    iziToast.show({\n      message: 'Please fill out this field!',\n      backgroundColor: '#ff4e4e',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  // Скидання стану\n  currentPage = 1;\n  currentQuery = query;\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    hideLoader();\n\n    if (data.hits.length === 0) {\n      iziToast.show({\n        message: 'No images found. Try another query!',\n        backgroundColor: '#ff4e4e',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    createGallery(data.hits);\n    input.value = '';\n\n    // Повідомлення про успіх\n    iziToast.show({\n      message: `Found ${data.totalHits} images for \"${currentQuery}\".`,\n      backgroundColor: '#00c851',\n      position: 'topRight',\n      timeout: 3000,\n    });\n\n    // Перевірка на кінець колекції\n    if (data.totalHits > data.hits.length) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      iziToast.show({\n        message: \"You've reached the end of search results.\",\n        backgroundColor: '#ffcc00',\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    hideLoader();\n    console.error('Search error:', error.message);\n    iziToast.show({\n      message: 'Error while fetching images.',\n      backgroundColor: '#ffcc00',\n      position: 'topRight',\n    });\n  }\n});\n\n// Обробка кнопки Load More\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage++;\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    hideLoader();\n    createGallery(data.hits);\n\n    // Прокрутка\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    // Перевірка на завершення\n    const totalShownImages = currentPage * 15;\n    if (totalShownImages >= data.totalHits) {\n      hideLoadMoreButton();\n      iziToast.show({\n        message: \"You've reached the end of search results.\",\n        backgroundColor: '#ffcc00',\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    hideLoader();\n    console.error('Load more error:', error.message);\n    iziToast.show({\n      message: 'Error while loading more images.',\n      backgroundColor: '#ff4e4e',\n      position: 'topRight',\n    });\n  }\n});\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","perPage","axios","lightbox","SimpleLightbox","hideLoader","loader","showLoader","clearGallery","gallery","createGallery","images","markup","image","showLoadMoreButton","btn","hideLoadMoreButton","form","input","loadMoreBtn","currentPage","currentQuery","iziToast","data","error","cardHeight"],"mappings":"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"}